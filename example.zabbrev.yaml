# ~/.config/zsh/zabbrev.yaml
abbrevs:
  # simple abbreviation
  - name: git
    abbr: 'g'
    replace-self: 'git'

  - name: editor
    abbr: 'e'
    replace-self: '${EDITOR}'
    evaluate: true

  # add default option
  - name: mv -i
    abbr: 'mv'
    append: '-i'

  # prepend sudo
  - name: sudo apt
    abbr: 'apt'
    prepend: 'sudo'

  # subcommand abbreviation
  - name: git commit
    context: 'git'
    abbr: 'c'
    replace-self: 'commit'

  - name: git push -u origin HEAD
    context: 'git'
    abbr: 'pu'
    replace-self: 'push -u origin HEAD'

  # subcommand abbreviation with evaluate
  - name: git pull --rebase origin CURRENT_BRANCH
    context: 'git'
    abbr: 'pr'
    replace-self: 'pull --rebase origin $(git symbolic-ref --short HEAD)'
    evaluate: true

  # fix option
  - name: replace -f with --force-with-lease
    context: 'git push'
    abbr: '-f'
    replace-self: '--force-with-lease'
    global: true
    evaluate: true

  # fake command
  - name: compile cpp
    context: 'compile'
    abbr-suffix: '.cpp'
    replace-first: 'g++ -std=c++2b -Wall -Wextra -pedantic-errors'

  - name: extract tar
    context: 'extract'
    abbr-suffix: '.tar'
    replace-first: 'tar -xvf'

  - name: compress tar
    context: 'compress'
    abbr-suffix: '.tar'
    replace-first: 'tar -cvf'

  # associated command
  - name: run jar file
    abbr-suffix: '.jar'
    prepend: 'java -jar'

  # like a function
  - name: mkdircd
    context: 'mkdircd'
    abbr-prefix: ''
    replace-all: 'mkdir -p $1 && cd $1'
    evaluate: true

  # global abbreviation
  - name: '>/dev/null'
    abbr: 'null'
    replace-self: '>/dev/null'
    global: true

  # global abbreviation with context
  - name: git current branch
    context: 'git'
    abbr: 'B'
    replace-self: '$(git symbolic-ref --short HEAD)'
    global: true
    evaluate: true

  # as one pleases
  - context: 'cd'
    abbr: 'f'
    replace-self: $(fd --type d --hidden --no-ignore --exclude .git | fzf --preview 'exa -lha --time-style long-iso --color=always {}')
    evaluate: true
    redraw: true

  - context: 'cd'
    abbr: 'g'
    replace-self: $(fd --type d --hidden --follow '^.git$' ~ -x dirname | fzf --preview 'git -c color.status=always -C {} status')
    evaluate: true
    redraw: true

  # choose commit interactively
  - context: 'git rebase'
    abbr: '-i'
    append: $(git log --graph --all --oneline --color=always | fzf --ansi --no-sort --reverse --tiebreak index -0 --height=60% --preview "git show --color=always \$(printf '%s' {} | grep -io '[0-9a-f]\{7,\}' | head -1)" | \grep -io '[0-9a-f]\{7,\}' | head -1)
    evaluate: true
    redraw: true

  # ?????
  - context: 'rm -i'
    abbr-prefix: ''
    replace-context: rm $([[ -d $1 ]] && printf '%s' '-ri' || printf '%s' '-i')
    evaluate: true

  # [[  ]]
  - abbr: '[['
    replace-self: '[[ üê£ ]]'
    cursor: 'üê£'
